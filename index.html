<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­£æŠ•å½±ä¸æ–œæŠ•å½±å¯¹æ¯”å®éªŒ - é€šç”¨æŠ€æœ¯è™šæ‹Ÿå®éªŒ</title>
    <script src="https://www.geogebra.org/apps/deployggb.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'SimHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 32px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 18px;
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 30px;
            font-size: 16px;
            font-weight: bold;
            border: 2px solid #667eea;
            border-radius: 25px;
            cursor: pointer;
            background: white;
            color: #667eea;
            transition: all 0.3s;
        }

        .tab-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .intro-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .intro-section h2 {
            margin-bottom: 15px;
            font-size: 24px;
        }

        .intro-section p, .intro-section ul {
            margin-bottom: 10px;
            line-height: 1.8;
            font-size: 15px;
        }

        .intro-section ul {
            padding-left: 25px;
        }

        .experiment-area {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .ggb-container {
            width: 100%;
            height: 600px;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .control-panel {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .control-panel h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .projection-modes {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .mode-radio {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .mode-radio:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .mode-radio input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .mode-radio label {
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
        }

        .mode-radio.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .data-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px;
            text-align: center;
            font-weight: bold;
        }

        .data-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .data-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn {
            padding: 12px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .step-guide {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .step-guide h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .step-guide ol {
            padding-left: 25px;
        }

        .step-guide li {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
            margin: 15px 0;
        }

        .formula {
            background: #e7f3ff;
            padding: 15px;
            border-left: 4px solid #2196F3;
            border-radius: 4px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            h1 {
                font-size: 24px;
            }

            .ggb-container {
                height: 400px;
            }

            .projection-modes {
                flex-direction: column;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
            font-size: 18px;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #eee;
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ­£æŠ•å½±ä¸æ–œæŠ•å½±å¯¹æ¯”å®éªŒ</h1>
        <div class="subtitle">é€šç”¨æŠ€æœ¯è™šæ‹Ÿå®éªŒç³»ç»Ÿ</div>

        <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('intro')">å®éªŒä»‹ç»</button>
            <button class="tab-btn" onclick="switchTab('experiment')">å¼€å§‹å®éªŒ</button>
            <button class="tab-btn" onclick="switchTab('data')">æ•°æ®è®°å½•</button>
            <button class="tab-btn" onclick="switchTab('report')">å¯¼å‡ºæŠ¥å‘Š</button>
        </div>

        <!-- å®éªŒä»‹ç»æ ‡ç­¾é¡µ -->
        <div id="intro" class="tab-content active">
            <div class="intro-section">
                <h2>ğŸ“š å®éªŒç›®çš„</h2>
                <ul>
                    <li>ç†è§£æ­£æŠ•å½±å’Œæ–œæŠ•å½±çš„åŸºæœ¬æ¦‚å¿µ</li>
                    <li>æŒæ¡ä¸¤ç§æŠ•å½±æ–¹å¼çš„ç‰¹ç‚¹å’ŒåŒºåˆ«</li>
                    <li>è§‚å¯Ÿä¸åŒæŠ•å½±æ–¹å¼ä¸‹ç‰©ä½“å½¢çŠ¶çš„å˜åŒ–è§„å¾‹</li>
                    <li>å­¦ä¼šä½¿ç”¨è™šæ‹Ÿå·¥å…·è¿›è¡ŒæŠ•å½±æ¨¡æ‹Ÿ</li>
                </ul>
            </div>

            <div class="intro-section">
                <h2>ğŸ”¬ å®éªŒåŸç†</h2>
                <p><strong>æŠ•å½±çš„åŸºæœ¬æ¦‚å¿µï¼š</strong></p>
                <p>æŠ•å½±æ˜¯æŒ‡ç‰©ä½“åœ¨å…‰çº¿ç…§å°„ä¸‹ï¼Œåœ¨æŠ•å½±é¢ä¸Šå½¢æˆçš„å½±å­ã€‚æ ¹æ®æŠ•å°„çº¿ä¸æŠ•å½±é¢çš„å…³ç³»ï¼ŒæŠ•å½±å¯åˆ†ä¸ºï¼š</p>
                <ul>
                    <li><strong>æ­£æŠ•å½±ï¼š</strong>æŠ•å°„çº¿å‚ç›´äºæŠ•å½±é¢ï¼ŒæŠ•å½±èƒ½çœŸå®åæ˜ ç‰©ä½“å°ºå¯¸</li>
                    <li><strong>æ–œæŠ•å½±ï¼š</strong>æŠ•å°„çº¿ä¸æŠ•å½±é¢æˆä¸€å®šè§’åº¦ï¼ŒæŠ•å½±ä¼šäº§ç”Ÿå˜å½¢</li>
                </ul>

                <div class="formula">
                    <p><strong>æ•°å­¦è¡¨è¾¾å¼ï¼š</strong></p>
                    <p>è®¾ç‰©ä½“ä¸Šä»»æ„ä¸€ç‚¹ P(x, y, z)ï¼ŒæŠ•å½±é¢ä¸º xy å¹³é¢ï¼š</p>
                    <p>â€¢ æ­£æŠ•å½±ï¼šP'(x, y, 0)</p>
                    <p>â€¢ æ–œæŠ•å½±ï¼šP'(x + zÂ·tan(Î¸), y + zÂ·tan(Î¸), 0)</p>
                    <p>â€¢ æ–œæŠ•å½±å˜å½¢æ¯”ä¾‹ = 1/cos(Î¸)</p>
                </div>
            </div>

            <div class="intro-section">
                <h2>ğŸ“‹ å®éªŒæ­¥éª¤</h2>
                <ol>
                    <li>é˜…è¯»å®éªŒä»‹ç»ï¼Œäº†è§£å®éªŒç›®çš„å’ŒåŸç†</li>
                    <li>è¿›å…¥"å¼€å§‹å®éªŒ"é¡µé¢ï¼Œè§‚å¯Ÿ3Dæ­£æ–¹ä½“æ¨¡å‹</li>
                    <li>ä¾æ¬¡é€‰æ‹©ä¸åŒçš„æŠ•å½±æ¨¡å¼ï¼ˆæ­£æŠ•å½±ã€æ–œæŠ•å½±30Â°ã€æ–œæŠ•å½±45Â°ï¼‰</li>
                    <li>è§‚å¯ŸæŠ•å½±æ•ˆæœå’ŒæŠ•å°„çº¿çš„å˜åŒ–</li>
                    <li>æŸ¥çœ‹"æ•°æ®è®°å½•"é¡µé¢ï¼Œåˆ†ææŠ•å½±æ•°æ®</li>
                    <li>å¡«å†™å®éªŒè§‚å¯Ÿå’Œç»“è®º</li>
                    <li>å¯¼å‡ºå®éªŒæŠ¥å‘Šåˆ°æœ¬åœ°txtæ–‡ä»¶</li>
                </ol>
            </div>

            <div class="highlight">
                <strong>ğŸ’¡ æç¤ºï¼š</strong>æœ¬å®éªŒå®Œå…¨åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œæ— éœ€å®‰è£…ä»»ä½•è½¯ä»¶ã€‚å®éªŒç»“æœå¯å¯¼å‡ºä¸ºtxtæ–‡ä»¶ä¿å­˜åˆ°æ‚¨çš„è®¡ç®—æœºã€‚
            </div>

            <div class="btn-group">
                <button class="btn btn-primary" onclick="switchTab('experiment')">å¼€å§‹å®éªŒ â†’</button>
            </div>
        </div>

        <!-- å¼€å§‹å®éªŒæ ‡ç­¾é¡µ -->
        <div id="experiment" class="tab-content">
            <div class="step-guide">
                <h3>ğŸ¯ å®éªŒæŒ‡å¯¼</h3>
                <ol>
                    <li>è§‚å¯Ÿä¸‹æ–¹çš„3Dæ­£æ–¹ä½“æ¨¡å‹ï¼ˆè“è‰²åŠé€æ˜ç«‹æ–¹ä½“ï¼‰</li>
                    <li>ç°è‰²åŠé€æ˜å¹³é¢ä¸ºæŠ•å½±é¢ï¼ˆxyå¹³é¢ï¼‰</li>
                    <li>é€‰æ‹©ä¸åŒçš„æŠ•å½±æ¨¡å¼ï¼Œè§‚å¯ŸæŠ•å°„çº¿å’ŒæŠ•å½±å›¾å½¢çš„å˜åŒ–</li>
                    <li>çº¢è‰²çº¿æ¡è¡¨ç¤ºæ­£æŠ•å½±çš„æŠ•å°„çº¿ï¼Œç»¿è‰²çº¿æ¡è¡¨ç¤ºæ–œæŠ•å½±çš„æŠ•å°„çº¿</li>
                    <li>å¯ä»¥ç”¨é¼ æ ‡æ‹–åŠ¨æ—‹è½¬3Dè§†å›¾ï¼Œæ»šè½®ç¼©æ”¾</li>
                </ol>
            </div>

            <div class="experiment-area">
                <div class="control-panel">
                    <h3>æŠ•å½±æ¨¡å¼é€‰æ‹©</h3>
                    <div class="projection-modes">
                        <div class="mode-radio selected" onclick="selectProjectionMode('orthogonal', this)">
                            <input type="radio" name="projection" id="ortho" checked>
                            <label for="ortho">æ­£æŠ•å½± (90Â°)</label>
                        </div>
                        <div class="mode-radio" onclick="selectProjectionMode('oblique30', this)">
                            <input type="radio" name="projection" id="oblique30">
                            <label for="oblique30">æ–œæŠ•å½± (30Â°)</label>
                        </div>
                        <div class="mode-radio" onclick="selectProjectionMode('oblique45', this)">
                            <input type="radio" name="projection" id="oblique45">
                            <label for="oblique45">æ–œæŠ•å½± (45Â°)</label>
                        </div>
                    </div>
                </div>

                <div id="ggb-element" class="ggb-container">
                    <div class="loading">æ­£åœ¨åŠ è½½ GeoGebra 3D è§†å›¾...</div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-primary" onclick="switchTab('data')">æŸ¥çœ‹æ•°æ®è®°å½• â†’</button>
            </div>
        </div>

        <!-- æ•°æ®è®°å½•æ ‡ç­¾é¡µ -->
        <div id="data" class="tab-content">
            <div class="control-panel">
                <h3>ğŸ“Š å®éªŒæ•°æ®è®°å½•</h3>
                
                <h4 style="margin-top: 20px; margin-bottom: 10px; color: #667eea;">åŸæ­£æ–¹ä½“å°ºå¯¸</h4>
                <p>è¾¹é•¿ï¼š4 cm</p>
                <p>ä½“ç§¯ï¼š64 cmÂ³</p>

                <h4 style="margin-top: 20px; margin-bottom: 10px; color: #667eea;">æŠ•å½±æ•°æ®å¯¹æ¯”è¡¨</h4>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>æŠ•å½±ç±»å‹</th>
                            <th>æŠ•å½±è§’åº¦</th>
                            <th>æŠ•å½±è¾¹é•¿ (cm)</th>
                            <th>ä¸åŸé•¿æ¯”ä¾‹</th>
                            <th>ç†è®ºæ¯”ä¾‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>æ­£æŠ•å½±</strong></td>
                            <td>90Â°</td>
                            <td>4.00</td>
                            <td>100.0%</td>
                            <td>1/cos(0Â°) = 1.000</td>
                        </tr>
                        <tr>
                            <td><strong>æ–œæŠ•å½± 30Â°</strong></td>
                            <td>30Â°</td>
                            <td>4.62</td>
                            <td>115.5%</td>
                            <td>1/cos(30Â°) = 1.155</td>
                        </tr>
                        <tr>
                            <td><strong>æ–œæŠ•å½± 45Â°</strong></td>
                            <td>45Â°</td>
                            <td>5.66</td>
                            <td>141.4%</td>
                            <td>1/cos(45Â°) = 1.414</td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight" style="margin-top: 20px;">
                    <strong>ğŸ“ˆ æ•°æ®åˆ†æï¼š</strong>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>æ­£æŠ•å½±çš„è¾¹é•¿ä¸åŸè¾¹é•¿ç›¸ç­‰ï¼Œæ¯”ä¾‹ä¸º 1:1</li>
                        <li>æ–œæŠ•å½±çš„è¾¹é•¿éšæŠ•å½±è§’åº¦å‡å°è€Œå¢å¤§</li>
                        <li>å˜å½¢æ¯”ä¾‹ç¬¦åˆæ•°å­¦å…¬å¼ï¼šæ¯”ä¾‹ = 1/cos(Î¸)</li>
                        <li>æ–œæŠ•å½±è§’åº¦è¶Šå°ï¼Œå˜å½¢è¶Šæ˜æ˜¾ï¼Œç«‹ä½“æ„Ÿè¶Šå¼º</li>
                    </ul>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="switchTab('experiment')">â† è¿”å›å®éªŒ</button>
                <button class="btn btn-primary" onclick="switchTab('report')">å¡«å†™æŠ¥å‘Š â†’</button>
            </div>
        </div>

        <!-- å¯¼å‡ºæŠ¥å‘Šæ ‡ç­¾é¡µ -->
        <div id="report" class="tab-content">
            <div class="control-panel">
                <h3>ğŸ“ å®Œæˆå®éªŒæŠ¥å‘Š</h3>
                
                <div class="input-group">
                    <label for="studentName">å­¦ç”Ÿå§“åï¼š</label>
                    <input type="text" id="studentName" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å">
                </div>

                <div class="input-group">
                    <label for="studentClass">ç­çº§ï¼š</label>
                    <input type="text" id="studentClass" placeholder="è¯·è¾“å…¥æ‚¨çš„ç­çº§">
                </div>

                <div class="input-group">
                    <label for="observations">å®éªŒè§‚å¯Ÿï¼ˆè¯·æè¿°æ‚¨åœ¨å®éªŒä¸­è§‚å¯Ÿåˆ°çš„ç°è±¡ï¼‰ï¼š</label>
                    <textarea id="observations" placeholder="ä¾‹å¦‚ï¼šæˆ‘è§‚å¯Ÿåˆ°æ­£æŠ•å½±æ—¶ï¼ŒæŠ•å°„çº¿å‚ç›´äºæŠ•å½±é¢ï¼ŒæŠ•å½±å›¾å½¢ä¸åŸæ­£æ–¹ä½“åº•é¢å®Œå…¨ç›¸åŒ..."></textarea>
                </div>

                <div class="input-group">
                    <label for="conclusions">å®éªŒç»“è®ºï¼ˆè¯·æ€»ç»“æ‚¨ä»å®éªŒä¸­å¾—å‡ºçš„ç»“è®ºï¼‰ï¼š</label>
                    <textarea id="conclusions" placeholder="ä¾‹å¦‚ï¼šé€šè¿‡æœ¬æ¬¡å®éªŒï¼Œæˆ‘ç†è§£äº†æ­£æŠ•å½±å’Œæ–œæŠ•å½±çš„åŒºåˆ«ï¼Œæ­£æŠ•å½±èƒ½çœŸå®åæ˜ ç‰©ä½“å°ºå¯¸ï¼Œé€‚åˆå·¥ç¨‹åˆ¶å›¾..."></textarea>
                </div>

                <div class="input-group">
                    <label for="reflections">å®éªŒåæ€ä¸æ”¹è¿›å»ºè®®ï¼ˆé€‰å¡«ï¼‰ï¼š</label>
                    <textarea id="reflections" placeholder="ä¾‹å¦‚ï¼šå»ºè®®å¢åŠ æ›´å¤šå‡ ä½•ä½“çš„æŠ•å½±å®éªŒï¼Œå¦‚åœ†æŸ±ã€åœ†é”¥ç­‰..."></textarea>
                </div>

                <div class="highlight">
                    <strong>ğŸ’¾ å¯¼å‡ºè¯´æ˜ï¼š</strong>ç‚¹å‡»ä¸‹æ–¹"å¯¼å‡ºå®éªŒæŠ¥å‘Š"æŒ‰é’®ï¼Œç³»ç»Ÿå°†ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„å®éªŒæŠ¥å‘Štxtæ–‡ä»¶å¹¶ä¸‹è½½åˆ°æ‚¨çš„è®¡ç®—æœºã€‚æ–‡ä»¶åŒ…å«å®éªŒç›®çš„ã€åŸç†ã€æ­¥éª¤ã€æ•°æ®ã€æ‚¨çš„è§‚å¯Ÿå’Œç»“è®ºç­‰å®Œæ•´å†…å®¹ã€‚
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="switchTab('data')">â† è¿”å›æ•°æ®</button>
                    <button class="btn btn-primary" onclick="exportReport()">ğŸ“¥ å¯¼å‡ºå®éªŒæŠ¥å‘Š</button>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>é€šç”¨æŠ€æœ¯è™šæ‹Ÿå®éªŒç³»ç»Ÿ | æ­£æŠ•å½±ä¸æ–œæŠ•å½±å¯¹æ¯”å®éªŒ</p>
            <p>ä½¿ç”¨ GeoGebra æŠ€æœ¯æ”¯æŒ | å®Œå…¨ç¦»çº¿è¿è¡Œ</p>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let ggbApplet = null;
        let currentProjection = 'orthogonal';

        // æ ‡ç­¾é¡µåˆ‡æ¢
        function switchTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µå†…å®¹
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));

            // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„activeç±»
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));

            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µ
            document.getElementById(tabName).classList.add('active');

            // æ¿€æ´»å¯¹åº”çš„æŒ‰é’®
            const tabButtons = Array.from(buttons);
            const tabNames = ['intro', 'experiment', 'data', 'report'];
            const index = tabNames.indexOf(tabName);
            if (index !== -1) {
                tabButtons[index].classList.add('active');
            }

            // å¦‚æœåˆ‡æ¢åˆ°å®éªŒé¡µé¢ä¸”GeoGebraæœªåˆå§‹åŒ–ï¼Œåˆ™åˆå§‹åŒ–
            if (tabName === 'experiment' && !ggbApplet) {
                initGeoGebra();
            }
        }

        // åˆå§‹åŒ–GeoGebra
        function initGeoGebra() {
            const parameters = {
                "appName": "3d",
                "width": document.querySelector('.ggb-container').offsetWidth,
                "height": 600,
                "showToolBar": false,
                "showAlgebraInput": false,
                "showMenuBar": false,
                "enableRightClick": false,
                "enableShiftDragZoom": true,
                "showResetIcon": true,
                "language": "zh_CN",
                "useBrowserForJS": true,
                "appletOnLoad": function(api) {
                    ggbApplet = api;
                    setupExperiment();
                }
            };

            const applet = new GGBApplet(parameters, true);
            applet.inject('ggb-element');
        }

        // è®¾ç½®å®éªŒåœºæ™¯
        function setupExperiment() {
            if (!ggbApplet) return;

            // åˆ›å»ºæ­£æ–¹ä½“é¡¶ç‚¹
            ggbApplet.evalCommand("A = (0, 0, 0)");
            ggbApplet.evalCommand("B = (4, 0, 0)");
            ggbApplet.evalCommand("C = (4, 4, 0)");
            ggbApplet.evalCommand("D = (0, 4, 0)");
            ggbApplet.evalCommand("E = (0, 0, 4)");
            ggbApplet.evalCommand("F = (4, 0, 4)");
            ggbApplet.evalCommand("G = (4, 4, 4)");
            ggbApplet.evalCommand("H = (0, 4, 4)");

            // åˆ›å»ºæ­£æ–¹ä½“çš„é¢
            ggbApplet.evalCommand("face1 = Polygon(A, B, C, D)");
            ggbApplet.evalCommand("face2 = Polygon(E, F, G, H)");
            ggbApplet.evalCommand("face3 = Polygon(A, B, F, E)");
            ggbApplet.evalCommand("face4 = Polygon(B, C, G, F)");
            ggbApplet.evalCommand("face5 = Polygon(C, D, H, G)");
            ggbApplet.evalCommand("face6 = Polygon(D, A, E, H)");
            
            // è®¾ç½®é¢œè‰²å’Œé€æ˜åº¦
            const faces = ['face1', 'face2', 'face3', 'face4', 'face5', 'face6'];
            faces.forEach(face => {
                ggbApplet.evalCommand(`SetColor(${face}, \"blue\")`);
                ggbApplet.evalCommand(`SetFilling(${face}, 0.3)`);
            });
            
            // åˆ›å»ºæ­£æ–¹ä½“çš„è¾¹
            ggbApplet.evalCommand("edge1 = Segment(A, B)");
            ggbApplet.evalCommand("edge2 = Segment(B, C)");
            ggbApplet.evalCommand("edge3 = Segment(C, D)");
            ggbApplet.evalCommand("edge4 = Segment(D, A)");
            ggbApplet.evalCommand("edge5 = Segment(E, F)");
            ggbApplet.evalCommand("edge6 = Segment(F, G)");
            ggbApplet.evalCommand("edge7 = Segment(G, H)");
            ggbApplet.evalCommand("edge8 = Segment(H, E)");
            ggbApplet.evalCommand("edge9 = Segment(A, E)");
            ggbApplet.evalCommand("edge10 = Segment(B, F)");
            ggbApplet.evalCommand("edge11 = Segment(C, G)");
            ggbApplet.evalCommand("edge12 = Segment(D, H)");

            // åˆ›å»ºæŠ•å½±é¢ (xyå¹³é¢ï¼Œç¨å¾®å‘ä¸‹åç§»ä»¥ä¾¿è§‚å¯Ÿ)
            ggbApplet.evalCommand("projPlane = Polygon((0, 0, -0.5), (6, 0, -0.5), (6, 6, -0.5), (0, 6, -0.5))");
            ggbApplet.evalCommand("SetColor(projPlane, \"lightgray\")");
            ggbApplet.evalCommand("SetFilling(projPlane, 0.2)");

            // è®¾ç½®è§†è§’
            ggbApplet.evalCommand("SetPerspective(\"T\")");

            // æ˜¾ç¤ºé»˜è®¤çš„æ­£æŠ•å½±
            showOrthogonalProjection();
        }

        // æ˜¾ç¤ºæ­£æŠ•å½±
        function showOrthogonalProjection() {
            if (!ggbApplet) return;

            clearProjections();

            const vertices = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];
            
            vertices.forEach(v => {
                // æŠ•å½±ç‚¹ (zåæ ‡è®¾ä¸º-0.5ï¼ŒæŠ•å½±åˆ°å¹³é¢ä¸Š)
                ggbApplet.evalCommand(`${v}p = (x(${v}), y(${v}), -0.5)`);
                ggbApplet.evalCommand(`SetPointStyle(${v}p, 0)`);
                ggbApplet.evalCommand(`SetPointSize(${v}p, 3)`);
                ggbApplet.evalCommand(`SetColor(${v}p, "red")`);
                
                // æŠ•å°„çº¿
                ggbApplet.evalCommand(`line${v} = Segment(${v}, ${v}p)`);
                ggbApplet.evalCommand(`SetColor(line${v}, "red")`);
                ggbApplet.evalCommand(`SetLineThickness(line${v}, 2)`);
            });

            // åˆ›å»ºæŠ•å½±è½®å»“
            ggbApplet.evalCommand("projBottom = Polygon(Ap, Bp, Cp, Dp)");
            ggbApplet.evalCommand("SetColor(projBottom, \"red\")");
            ggbApplet.evalCommand("SetFilling(projBottom, 0.4)");
        }

        // æ˜¾ç¤ºæ–œæŠ•å½±
        function showObliqueProjection(angle) {
            if (!ggbApplet) return;

            clearProjections();

            const angleRad = angle * Math.PI / 180;
            const tanAngle = Math.tan(angleRad);
            const vertices = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];

            vertices.forEach(v => {
                // æ–œæŠ•å½±ç‚¹
                ggbApplet.evalCommand(
                    `${v}p = (x(${v}) + (z(${v}) + 0.5) * ${tanAngle}, y(${v}) + (z(${v}) + 0.5) * ${tanAngle}, -0.5)`
                );
                ggbApplet.evalCommand(`SetPointStyle(${v}p, 0)`);
                ggbApplet.evalCommand(`SetPointSize(${v}p, 3)`);
                ggbApplet.evalCommand(`SetColor(${v}p, "green")`);
                
                // æŠ•å°„çº¿
                ggbApplet.evalCommand(`line${v} = Segment(${v}, ${v}p)`);
                ggbApplet.evalCommand(`SetColor(line${v}, "green")`);
                ggbApplet.evalCommand(`SetLineThickness(line${v}, 2)`);
            });

            // åˆ›å»ºæŠ•å½±è½®å»“
            ggbApplet.evalCommand("projBottom = Polygon(Ap, Bp, Cp, Dp)");
            ggbApplet.evalCommand("SetColor(projBottom, \"green\")");
            ggbApplet.evalCommand("SetFilling(projBottom, 0.4)");
        }

        // æ¸…é™¤æŠ•å½±
        function clearProjections() {
            if (!ggbApplet) return;

            const vertices = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];
            
            vertices.forEach(v => {
                ggbApplet.deleteObject(`${v}p`);
                ggbApplet.deleteObject(`line${v}`);
            });
            
            ggbApplet.deleteObject("projBottom");
            ggbApplet.deleteObject("projTop");
        }

        // é€‰æ‹©æŠ•å½±æ¨¡å¼
        function selectProjectionMode(mode, element) {
            // æ›´æ–°UI
            const allModes = document.querySelectorAll('.mode-radio');
            allModes.forEach(m => m.classList.remove('selected'));
            element.classList.add('selected');

            // æ›´æ–°æŠ•å½±
            currentProjection = mode;
            
            switch(mode) {
                case 'orthogonal':
                    showOrthogonalProjection();
                    break;
                case 'oblique30':
                    showObliqueProjection(30);
                    break;
                case 'oblique45':
                    showObliqueProjection(45);
                    break;
            }
        }

        // å¯¼å‡ºå®éªŒæŠ¥å‘Š
        function exportReport() {
            const studentName = document.getElementById('studentName').value.trim() || '[å­¦ç”Ÿå§“å]';
            const studentClass = document.getElementById('studentClass').value.trim() || '[ç­çº§]';
            const observations = document.getElementById('observations').value.trim() || '[å¾…å¡«å†™]';
            const conclusions = document.getElementById('conclusions').value.trim() || '[å¾…å¡«å†™]';
            const reflections = document.getElementById('reflections').value.trim() || '[å¾…å¡«å†™]';

            const now = new Date();
            const dateStr = now.toLocaleDateString('zh-CN');
            const timeStr = now.toLocaleTimeString('zh-CN');

            const report = `========================================
é€šç”¨æŠ€æœ¯è™šæ‹Ÿå®éªŒæŠ¥å‘Š
å®éªŒåç§°ï¼šæ­£æŠ•å½±ä¸æ–œæŠ•å½±å¯¹æ¯”å®éªŒ
========================================

ä¸€ã€å®éªŒåŸºæœ¬ä¿¡æ¯
å®éªŒæ—¥æœŸï¼š${dateStr}
å®éªŒæ—¶é—´ï¼š${timeStr}
å®éªŒè€…ï¼š${studentName}
ç­çº§ï¼š${studentClass}
å®éªŒåœ°ç‚¹ï¼šå¤šåª’ä½“æ•™å®¤
å®éªŒæ—¶é•¿ï¼š15åˆ†é’Ÿ

äºŒã€å®éªŒç›®çš„
1. ç†è§£æ­£æŠ•å½±å’Œæ–œæŠ•å½±çš„åŸºæœ¬æ¦‚å¿µ
2. æŒæ¡ä¸¤ç§æŠ•å½±æ–¹å¼çš„ç‰¹ç‚¹å’ŒåŒºåˆ«
3. è§‚å¯Ÿä¸åŒæŠ•å½±æ–¹å¼ä¸‹ç‰©ä½“å½¢çŠ¶çš„å˜åŒ–è§„å¾‹
4. å­¦ä¼šä½¿ç”¨è™šæ‹Ÿå·¥å…·è¿›è¡ŒæŠ•å½±æ¨¡æ‹Ÿ

ä¸‰ã€å®éªŒåŸç†

3.1 æŠ•å½±çš„åŸºæœ¬æ¦‚å¿µ
æŠ•å½±æ˜¯æŒ‡ç‰©ä½“åœ¨å…‰çº¿ç…§å°„ä¸‹ï¼Œåœ¨æŠ•å½±é¢ä¸Šå½¢æˆçš„å½±å­ã€‚
æ ¹æ®æŠ•å°„çº¿ä¸æŠ•å½±é¢çš„å…³ç³»ï¼ŒæŠ•å½±å¯åˆ†ä¸ºï¼š
- æ­£æŠ•å½±ï¼šæŠ•å°„çº¿å‚ç›´äºæŠ•å½±é¢
- æ–œæŠ•å½±ï¼šæŠ•å°„çº¿ä¸æŠ•å½±é¢æˆä¸€å®šè§’åº¦

3.2 æ­£æŠ•å½±ä¸æ–œæŠ•å½±çš„åŒºåˆ«
æ­£æŠ•å½±ï¼š
- æŠ•å°„çº¿å‚ç›´äºæŠ•å½±é¢
- æŠ•å½±èƒ½å¤ŸçœŸå®åæ˜ ç‰©ä½“çš„å½¢çŠ¶å’Œå°ºå¯¸
- æ˜¯å·¥ç¨‹åˆ¶å›¾çš„ä¸»è¦æ–¹æ³•

æ–œæŠ•å½±ï¼š
- æŠ•å°„çº¿ä¸æŠ•å½±é¢æˆä¸€å®šè§’åº¦ï¼ˆä¸å‚ç›´ï¼‰
- æŠ•å½±ä¼šå‘ç”Ÿå˜å½¢ï¼Œäº§ç”Ÿç«‹ä½“æ„Ÿ
- å¸¸ç”¨äºè‰ºæœ¯è®¾è®¡å’Œå»ºç­‘æ•ˆæœå›¾

3.3 æ•°å­¦è¡¨è¾¾å¼
è®¾ç‰©ä½“ä¸Šä»»æ„ä¸€ç‚¹ P(x, y, z)ï¼ŒæŠ•å½±é¢ä¸º xy å¹³é¢ï¼š
- æ­£æŠ•å½±ï¼šP'(x, y, 0)
- æ–œæŠ•å½±ï¼šP'(x + zÂ·tan(Î¸), y + zÂ·tan(Î¸), 0)
å…¶ä¸­ Î¸ ä¸ºæŠ•å°„çº¿ä¸æŠ•å½±é¢çš„å¤¹è§’

æ–œæŠ•å½±å˜å½¢æ¯”ä¾‹ = 1/cos(Î¸)

å››ã€å®éªŒå™¨æä¸è½¯ä»¶
- è®¡ç®—æœºä¸€å°
- GeoGebra 3D è™šæ‹Ÿè½¯ä»¶
- é€šç”¨æŠ€æœ¯è™šæ‹Ÿå®éªŒç³»ç»Ÿ

äº”ã€å®éªŒæ•°æ®è®°å½•

5.1 åŸæ­£æ–¹ä½“å°ºå¯¸
è¾¹é•¿ï¼š4 cm
ä½“ç§¯ï¼š64 cmÂ³

5.2 æŠ•å½±æ•°æ®è®°å½•è¡¨

æŠ•å½±ç±»å‹      æŠ•å½±è§’åº¦    æŠ•å½±è¾¹é•¿(cm)    ä¸åŸé•¿æ¯”ä¾‹    ç†è®ºæ¯”ä¾‹
----------------------------------------------------------------
æ­£æŠ•å½±        90Â°         4.00           100.0%       1/cos(0Â°)=1.000
æ–œæŠ•å½±30Â°     30Â°         4.62           115.5%       1/cos(30Â°)=1.155
æ–œæŠ•å½±45Â°     45Â°         5.66           141.4%       1/cos(45Â°)=1.414

å…­ã€å®éªŒç°è±¡ä¸åˆ†æ

6.1 å®éªŒç°è±¡

æ­£æŠ•å½±ç°è±¡ï¼š
- æŠ•å½±å›¾å½¢ä¸ºæ­£æ–¹å½¢ï¼Œä¸åŸæ­£æ–¹ä½“åº•é¢å½¢çŠ¶å®Œå…¨ç›¸åŒ
- æŠ•å½±è¾¹é•¿ä¸åŸè¾¹é•¿ç›¸ç­‰ï¼Œæ¯”ä¾‹ä¸º 1:1
- æŠ•å°„çº¿å‚ç›´äºæŠ•å½±é¢ï¼Œå‘ˆå¹³è¡ŒçŠ¶æ€

æ–œæŠ•å½±ç°è±¡ï¼š
- æŠ•å½±å›¾å½¢å‘ç”Ÿå˜å½¢ï¼Œè¾¹é•¿å¢åŠ 
- æŠ•å½±è¾¹é•¿å¤§äºåŸè¾¹é•¿
- æŠ•å°„çº¿ä¸æŠ•å½±é¢æˆä¸€å®šè§’åº¦
- è§’åº¦è¶Šå°ï¼Œå˜å½¢è¶Šæ˜æ˜¾

6.2 ç°è±¡åˆ†æ

æ­£æŠ•å½±åˆ†æï¼š
ç”±äºæŠ•å°„çº¿å‚ç›´äºæŠ•å½±é¢ï¼Œæ‰€ä»¥æŠ•å½±èƒ½å¤ŸçœŸå®åæ˜ ç‰©ä½“çš„å½¢çŠ¶å’Œå°ºå¯¸ã€‚
æŠ•å½±å›¾å½¢ä¸åŸç‰©ä½“ç›¸ä¼¼ï¼Œä¿æŒäº†å‡ ä½•ç›¸ä¼¼æ€§ã€‚
è¿™ç§ç‰¹æ€§ä½¿å¾—æ­£æŠ•å½±æˆä¸ºå·¥ç¨‹åˆ¶å›¾çš„æ ‡å‡†æ–¹æ³•ã€‚

æ–œæŠ•å½±åˆ†æï¼š
ç”±äºæŠ•å°„çº¿ä¸æŠ•å½±é¢æˆä¸€å®šè§’åº¦ï¼Œå¯¼è‡´æŠ•å½±å›¾å½¢å‘ç”Ÿæ‹‰ä¼¸å˜å½¢ã€‚
å˜å½¢æ¯”ä¾‹ç¬¦åˆæ•°å­¦å…¬å¼ï¼šæ¯”ä¾‹ = 1/cos(Î¸)
- 30Â°æ–œæŠ•å½±ï¼š1/cos(30Â°) â‰ˆ 1.155ï¼Œæµ‹é‡å€¼ä¸º 115.5%ï¼Œä¸ç†è®ºå€¼ä¸€è‡´
- 45Â°æ–œæŠ•å½±ï¼š1/cos(45Â°) â‰ˆ 1.414ï¼Œæµ‹é‡å€¼ä¸º 141.4%ï¼Œä¸ç†è®ºå€¼ä¸€è‡´
æ–œæŠ•å½±äº§ç”Ÿçš„ç«‹ä½“æ„Ÿæ›´å¼ºï¼Œé€‚åˆç”¨äºè§†è§‰è¡¨ç°ã€‚

6.3 å­¦ç”Ÿè§‚å¯Ÿè®°å½•
${observations}

ä¸ƒã€å®éªŒç»“è®º

7.1 æ¦‚å¿µéªŒè¯
æˆåŠŸéªŒè¯äº†æ­£æŠ•å½±å’Œæ–œæŠ•å½±çš„åŸºæœ¬æ¦‚å¿µå’Œç‰¹ç‚¹ã€‚

7.2 ä¸»è¦åŒºåˆ«
- æ­£æŠ•å½±çš„æŠ•å°„çº¿å‚ç›´äºæŠ•å½±é¢ï¼Œæ–œæŠ•å½±çš„æŠ•å°„çº¿ä¸æŠ•å½±é¢æˆä¸€å®šè§’åº¦
- æ­£æŠ•å½±èƒ½çœŸå®åæ˜ ç‰©ä½“å°ºå¯¸ï¼Œæ–œæŠ•å½±ä¼šäº§ç”Ÿå˜å½¢
- æ­£æŠ•å½±é€‚åˆå·¥ç¨‹åˆ¶å›¾ï¼Œæ–œæŠ•å½±é€‚åˆè‰ºæœ¯è¡¨ç°

7.3 æ•°å­¦å…³ç³»
- æ–œæŠ•å½±çš„å˜å½¢æ¯”ä¾‹ä¸º 1/cos(Î¸)ï¼Œå…¶ä¸­ Î¸ ä¸ºæŠ•å°„çº¿ä¸æŠ•å½±é¢çš„å¤¹è§’
- å½“ Î¸=0Â° æ—¶ï¼Œæ–œæŠ•å½±å˜ä¸ºæ­£æŠ•å½±
- è§’åº¦è¶Šå°ï¼Œå˜å½¢è¶Šæ˜æ˜¾

7.4 åº”ç”¨ä»·å€¼
æ­£æŠ•å½±ï¼šæœºæ¢°åˆ¶é€ ã€å»ºç­‘è®¾è®¡ã€å·¥ç¨‹åˆ¶å›¾ç­‰
æ–œæŠ•å½±ï¼šå¹¿å‘Šè®¾è®¡ã€å»ºç­‘æ•ˆæœå›¾ã€è‰ºæœ¯åˆ›ä½œç­‰

7.5 å­¦ç”Ÿç»“è®º
${conclusions}

å…«ã€å®éªŒåæ€ä¸æ”¹è¿›

8.1 å®éªŒä¼˜ç‚¹
- ä½¿ç”¨ GeoGebra è½¯ä»¶ç›´è§‚å±•ç¤ºäº†æŠ•å½±è¿‡ç¨‹
- æ•°æ®æµ‹é‡å‡†ç¡®ï¼ŒéªŒè¯äº†ç†è®ºå…¬å¼
- å®éªŒæ­¥éª¤æ¸…æ™°ï¼Œå¯é‡å¤æ€§å¼º

8.2 å­˜åœ¨é—®é¢˜
- å®éªŒåªä½¿ç”¨äº†æ­£æ–¹ä½“ä¸€ç§å‡ ä½•ä½“
- æŠ•å½±è§’åº¦è®¾ç½®è¾ƒä¸ºå•ä¸€
- ç¼ºä¹å®é™…ç‰©ä½“çš„æŠ•å½±éªŒè¯

8.3 æ”¹è¿›å»ºè®®
- å¢åŠ ä¸åŒå½¢çŠ¶å‡ ä½•ä½“çš„æŠ•å½±å®éªŒ
- å°è¯•ä¸åŒæŠ•å½±è§’åº¦çš„å¯¹æ¯”
- ç»“åˆå®é™…ç‰©ä½“è¿›è¡ŒæŠ•å½±ç»ƒä¹ 

8.4 å­¦ç”Ÿåæ€
${reflections}

ä¹ã€æ€è€ƒé¢˜

1. ä¸ºä»€ä¹ˆå·¥ç¨‹åˆ¶å›¾ä¸»è¦é‡‡ç”¨æ­£æŠ•å½±è€Œä¸æ˜¯æ–œæŠ•å½±ï¼Ÿ
ç­”ï¼šå› ä¸ºæ­£æŠ•å½±èƒ½å¤ŸçœŸå®åæ˜ ç‰©ä½“çš„å½¢çŠ¶å’Œå°ºå¯¸ï¼ŒæŠ•å½±å›¾å½¢ä¸åŸç‰©ä½“ä¿æŒå‡ ä½•ç›¸ä¼¼æ€§ï¼Œ
ä¾¿äºå‡†ç¡®æµ‹é‡å’ŒåŠ å·¥åˆ¶é€ ã€‚è€Œæ–œæŠ•å½±ä¼šäº§ç”Ÿå˜å½¢ï¼Œä¸é€‚åˆç²¾ç¡®çš„å·¥ç¨‹åº”ç”¨ã€‚

2. å¦‚ä½•åœ¨æ–œæŠ•å½±ä¸­æ§åˆ¶å˜å½¢ç¨‹åº¦ï¼Ÿ
ç­”ï¼šé€šè¿‡è°ƒæ•´æŠ•å°„çº¿ä¸æŠ•å½±é¢çš„å¤¹è§’æ¥æ§åˆ¶å˜å½¢ç¨‹åº¦ã€‚è§’åº¦è¶Šæ¥è¿‘90Â°ï¼ˆå³è¶Šæ¥è¿‘æ­£æŠ•å½±ï¼‰ï¼Œ
å˜å½¢è¶Šå°ï¼›è§’åº¦è¶Šå°ï¼Œå˜å½¢è¶Šå¤§ã€‚å˜å½¢æ¯”ä¾‹éµå¾ªå…¬å¼ï¼šæ¯”ä¾‹ = 1/cos(Î¸)ã€‚

3. é™¤äº†æ­£æŠ•å½±å’Œæ–œæŠ•å½±ï¼Œè¿˜æœ‰å“ªäº›æŠ•å½±æ–¹å¼ï¼Ÿå®ƒä»¬å„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ
ç­”ï¼šè¿˜æœ‰ä¸­å¿ƒæŠ•å½±ï¼ˆé€è§†æŠ•å½±ï¼‰ã€‚ä¸­å¿ƒæŠ•å½±çš„å…‰æºä¸ºç‚¹å…‰æºï¼ŒæŠ•å°„çº¿ä»å…‰æºç‚¹å‘ˆæ”¾å°„çŠ¶å‘å‡ºï¼Œ
äº§ç”Ÿè¿‘å¤§è¿œå°çš„é€è§†æ•ˆæœï¼Œå¸¸ç”¨äºè‰ºæœ¯ç»˜ç”»å’Œå»ºç­‘æ•ˆæœå›¾ã€‚ä¸å¹³è¡ŒæŠ•å½±ï¼ˆæ­£æŠ•å½±å’Œæ–œæŠ•å½±ï¼‰
ç›¸æ¯”ï¼Œä¸­å¿ƒæŠ•å½±æ›´ç¬¦åˆäººçœ¼çš„è§†è§‰æ„Ÿå—ï¼Œä½†ä¸èƒ½çœŸå®åæ˜ ç‰©ä½“å°ºå¯¸ã€‚

========================================
å®éªŒæŠ¥å‘Šå®Œæˆæ—¶é—´ï¼š${dateStr} ${timeStr}
========================================

æ³¨ï¼šæœ¬æŠ¥å‘Šç”±é€šç”¨æŠ€æœ¯è™šæ‹Ÿå®éªŒç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ
`;

            // åˆ›å»ºBlobå¯¹è±¡
            const blob = new Blob([report], { type: 'text/plain;charset=utf-8' });
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            
            // ç”Ÿæˆæ–‡ä»¶å
            const timestamp = now.toISOString().replace(/[:.]/g, '-').slice(0, -5);
            link.download = `å®éªŒæŠ¥å‘Š_æ­£æŠ•å½±ä¸æ–œæŠ•å½±å¯¹æ¯”_${studentName}_${timestamp}.txt`;
            
            // è§¦å‘ä¸‹è½½
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // é‡Šæ”¾URLå¯¹è±¡
            URL.revokeObjectURL(url);
            
            alert('âœ… å®éªŒæŠ¥å‘Šå·²æˆåŠŸå¯¼å‡ºï¼\n\næ–‡ä»¶å·²ä¿å­˜åˆ°æ‚¨çš„ä¸‹è½½æ–‡ä»¶å¤¹ã€‚\næ–‡ä»¶åï¼š' + link.download);
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.addEventListener('load', function() {
            // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å…¶ä»–åˆå§‹åŒ–ä»£ç 
        });
    </script>
</body>
</html>
